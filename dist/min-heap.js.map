{"version":3,"file":"min-heap.js","sources":["../index.js"],"sourcesContent":["/**\n * Creates a HeapNode object for use in the MinHeap class.\n * The purpose of HeapNode is to establish some consistency across different\n * potential data types you'd use with MinHeap.\n */\nclass HeapNode {\n  /**\n   * Instantiates a HeapNode with a value property equal to the value passed.\n   * @param {*} value\n   */\n  constructor(value) {\n    this.value = value;\n  }\n}\n\n/**\n * Creates a min heap data structure\n * Public methods are insert(), pull(), and peek().\n */\nclass MinHeap {\n  #list = [];\n\n  /**\n   * Compares two nodes. Can be overridden with a custom function passed to the\n   * class constructor.\n   *\n   * @param {HeapNode} n1 - a node to compare\n   * @param {HeapNode} n2 - a node to compare\n   * @returns Returns true if n2's value is greater than n1's; false otherwise.\n   */\n  #compare = (n1, n2) => {\n    if (!n1 instanceof HeapNode || !n2 instanceof HeapNode) {\n      throw \"Comparison argument must be an instance of HeapNode.\";\n    }\n    return n2.value > n1.value;\n  };\n\n  /**\n   * Instantiates a MinHeap.\n   *\n   * @param {Function} compareFunction - optional custom comparison function.\n   * See the #compare member for implementation details.\n   */\n  constructor(compareFunction) {\n    if (compareFunction && typeof compareFunction === \"function\") {\n      this.#compare = compareFunction;\n    }\n  }\n\n  /**\n   * Gets the parent node's index.\n   *\n   * @param {Number} i index of the node whose parent you want.\n   * @returns the index of the parent node.\n   */\n  #parent(i) {\n    return Math.floor((i - 1) * 0.5);\n  }\n\n  /**\n   * Gets the index of the node's left child.\n   *\n   * @param {Number} i index of the node whose left child you want.\n   * @returns the index of the node's left child.\n   */\n  #leftChild(i) {\n    const childIndex = i * 2 + 1;\n    return this.#list[childIndex] && childIndex;\n  }\n\n  /**\n   * Gets the index of the node's right child.\n   *\n   * @param {Number} i index of the node whose right child you want.\n   * @returns the index of the node's right child.\n   */\n  #rightChild(i) {\n    const childIndex = i * 2 + 2;\n    return this.#list[childIndex] && childIndex;\n  }\n\n  /**\n   * Bubbles a node up the heap to its proper position, to maintain the min heap\n   * strutcure.\n   *\n   * @param {Number} i index of the node to bubble up.\n   */\n  #heapifyUp(i) {\n    if (this.#list.length < 2) return;\n\n    while (this.#parent(i) >= 0) {\n      const iParent = this.#parent(i);\n\n      // Get references to the nodes themselves\n      let node = this.#list[i];\n      let parentNode = this.#list[iParent];\n\n      // Exit early if the node at i is greater than the parent node\n      if (this.#compare(parentNode, node)) break;\n\n      // Swap the nodes and set them:\n      [parentNode, node] = [node, parentNode];\n      this.#list[iParent] = parentNode;\n      this.#list[i] = node;\n\n      i = iParent;\n    }\n  }\n\n  /**\n   * Moves a node down the heap to its proper position, to maintain the min heap\n   * strutcure.\n   *\n   * @param {Number} i index of the node to move down.\n   */\n  #heapifyDown(i) {\n    if (this.#list.length < 2) return;\n\n    while (this.#leftChild(i)) {\n      // Get the child indeces, and find the smaller of the two nodes\n      const iChildL = this.#leftChild(i);\n      const iChildR = this.#rightChild(i);\n      let iSmallestChild =\n        iChildR && this.#compare(this.#list[iChildR], this.#list[iChildL])\n          ? iChildR\n          : iChildL;\n\n      // Get references to the nodes themselves\n      let node = this.#list[i];\n      let childNode = this.#list[iSmallestChild];\n\n      // Exit early if the child is greater than the node at i\n      if (this.#compare(node, childNode)) break;\n\n      // Swap the nodes and set them\n      [node, childNode] = [childNode, node];\n      this.#list[i] = node;\n      this.#list[iSmallestChild] = childNode;\n\n      i = iSmallestChild;\n    }\n  }\n\n  /**\n   * Peek the root node.\n   *\n   * @returns the root node's value property.\n   */\n  peek() {\n    return this.#list[0].value;\n  }\n\n  /**\n   * Removes and returns the root node. Readjusts the heap to maintain its\n   * required structure.\n   *\n   * @returns the root node's value property.\n   */\n  pull() {\n    if (this.#list.length === 0) return;\n\n    const firstNode = this.#list[0];\n    const poppedNode = this.#list.pop();\n\n    if (this.#list.length !== 0) {\n      this.#list[0] = poppedNode;\n      this.#heapifyDown(0);\n    }\n\n    return firstNode.value;\n  }\n\n  /**\n   * Inserts a HeapNode instance.\n   *\n   * @param {*} value - The value of the node to insert.\n   * @returns the value passed.\n   */\n  insert(value) {\n    const length = this.#list.push(new HeapNode(value));\n    this.#heapifyUp(length - 1);\n    return value;\n  }\n\n  /**\n   * Gets the heap array. Useful for debugging/logging.\n   *\n   * @returns the heap array.\n   */\n  getList() {\n    return this.#list;\n  }\n\n  /**\n   * Checks if the heap is empty.\n   *\n   * @returns true if empty, false otherwise.\n   */\n  isEmpty() {\n    return this.#list.length === 0;\n  }\n}\n\nexport default MinHeap;\n"],"names":["HeapNode","constructor","value","this","_list","_classPrivateFieldLooseKey","_compare","_parent","_leftChild","_rightChild","_heapifyUp","_heapifyDown","MinHeap","compareFunction","Object","defineProperty","_heapifyDown2","_heapifyUp2","_rightChild2","_leftChild2","_parent2","writable","n1","n2","_classPrivateFieldLooseBase","peek","pull","length","firstNode","poppedNode","pop","insert","push","getList","isEmpty","i","Math","floor","childIndex","iParent","node","parentNode","iChildL","iChildR","iSmallestChild","childNode"],"mappings":"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"}